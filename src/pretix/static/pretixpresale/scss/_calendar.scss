.table-calendar, .week-calendar, .day-calendar {
  td, th {
    width: 14.29%;
  }
  h3 {
    font-size: 16px;
  }
  p {
    margin-bottom: 0;
  }
  .events {
    list-style: none;
    padding: 0;
  }
  a.event {
    display: block;
    background: lighten($brand-primary, 48%);
    color: $brand-primary;
    border-radius: $border-radius-base;
    border-style: solid;
    border-color: lighten($brand-primary, 30%);
    border-width: 1px 1px 1px 12px;
    border-left-color: inherit;

    padding: 3px 5px;
    margin-top: 3px;
    font-size: 12px;
    overflow-wrap: anywhere;
    text-decoration: none;

    &:hover {
      background: lighten($brand-primary, 50%);
      border-color: $brand-primary;
    }
    &:focus {
      outline-color: inherit;
    }

    &.continued, &.over {
      background: lighten(#767676, 48%);
      border-color: lighten(#767676, 30%);
      border-left-color: lighten(#767676, 30%);
      color: #767676;
      &:hover {
        background: lighten(#767676, 50%);
        border-color: lighten(#767676, 25%);
      }
    }

    &.soon {
      background: lighten($brand-primary, 53%);
      border-color: lighten($brand-primary, 40%);
      border-left-color: lighten($brand-primary, 20%);
      color: lighten($brand-primary, 5%);
      &:hover {
        background: lighten($brand-primary, 55%);
        border-color: lighten($brand-primary, 20%);
      }
    }

    &.available, {
      background: lighten($brand-success, 48%);
      border-color: lighten($brand-success, 30%);
      border-left-color: $brand-success;
      color: darken($brand-success, 12%);

      &:hover {
        background: lighten($brand-success, 50%);
        border-color: $brand-success;
      }
    }

    &.reserved, &.soldout, {
      background: lighten($brand-danger, 43%);
      border-color: lighten($brand-danger, 30%);
      border-left-color: lighten($brand-danger, 30%);
      color: darken($brand-danger, 5%);

      &:hover {
        background: lighten($brand-danger, 45%);
        border-color: lighten($brand-danger, 25%);
      }
    }

    .event-name {
      font-weight: bold;
      display: block;
    }
    .event-time, .event-status {
      display: block;
    }
  }
}
.week-calendar {
  .weekday {
    margin-bottom: 15px;
  }
  h3 {
    margin-bottom: 5px;
    font-weight: bold;
    cursor: pointer;
  }
  h3 .fa::before {
    content: $fa-var-caret-right;
  }
  details[open] h3 .fa::before {
    content: $fa-var-caret-down;
  }
  .events {
    overflow: hidden;  /* required for smooth toggle animation */
  }
  .no-events {
    display: none;
  }
}




.day-calendar {
  display: grid;
  grid-template-columns: auto auto;
  gap: 0;

  --day-h: 9;
  --day-m: 0;
  --day-end-h: 23;
  --day-end-m: 0;

  --col-size: 3em;

  overflow: scroll;
}
.event-size-15 {--col-size: 3em}
.event-size-30 {--col-size: 2em}
.event-size-60  {--col-size: 1em}
.event-size-90  {--col-size: .5em}
.event-size-120 {--col-size: .25em}
.event-size-180 {--col-size: .125em}

.day-row-name {
  position: sticky;
  left: 0;
  margin: 0;
  padding: 0;
  background-color: rgba(255,255,255,.9);
}
.day-timeline {
  list-style: none;
  margin: 0;
  padding: 0;

  display: grid;
  gap: 2px;
  --grid-cols: calc((var(--day-end-h) - var(--day-h)) * 12 + (var(--day-end-m) - var(--day-m)) / 5);
  grid-template-columns: repeat(var(--grid-cols), minmax(var(--col-size), 1fr));

  --event-h: 0;
  --event-m: 0;
  --event-end-h: 0;
  --event-end-m: 0;

  --offset-row: 1;
  --total-rows: 1;
}
.day-timeline[data-cal-rows="2"] {--total-rows: 2}
.day-timeline[data-cal-rows="3"] {--total-rows: 3}
.day-timeline[data-cal-rows="4"] {--total-rows: 4}
.day-timeline[data-cal-rows="5"] {--total-rows: 5}
.day-timeline[data-cal-rows="6"] {--total-rows: 6}
.day-timeline[data-cal-rows="7"] {--total-rows: 7}
.day-timeline[data-cal-rows="8"] {--total-rows: 8}
.day-timeline[data-cal-rows="9"] {--total-rows: 9}

.day-timeline [data-cal-row="1"] {--offset-row: 2}
.day-timeline [data-cal-row="2"] {--offset-row: 3}
.day-timeline [data-cal-row="3"] {--offset-row: 4}

.day-timeline > li {
  grid-column-start: calc(1 + (var(--event-h) - var(--day-h))*12 + (var(--event-m) - var(--day-m))/5);
  grid-column-end: calc(1 + (var(--event-end-h) - var(--day-h))*12 + (var(--event-end-m) - var(--day-m))/5);
  grid-row: var(--offset-row) / span 1;
}
.day-timeline > li:after {
  content: var(--event-h);
}

.ticks li, .tick {
    grid-row: 1 / span var(--total-rows) !important;
}
.ticks li:nth-of-type(odd), .tick {
    background-color: $table-bg-accent;
}


.day-calendar[data-start-time^="00"] {--day-h:  0}
.day-calendar[data-start-time^="01"] {--day-h:  1}
.day-calendar[data-start-time^="02"] {--day-h:  2}
.day-calendar[data-start-time^="03"] {--day-h:  3}
.day-calendar[data-start-time^="04"] {--day-h:  4}
.day-calendar[data-start-time^="05"] {--day-h:  5}
.day-calendar[data-start-time^="06"] {--day-h:  6}
.day-calendar[data-start-time^="07"] {--day-h:  7}
.day-calendar[data-start-time^="08"] {--day-h:  8}
.day-calendar[data-start-time^="09"] {--day-h:  9}
.day-calendar[data-start-time^="10"] {--day-h: 10}
.day-calendar[data-start-time^="11"] {--day-h: 11}
.day-calendar[data-start-time^="12"] {--day-h: 12}
.day-calendar[data-start-time^="13"] {--day-h: 13}
.day-calendar[data-start-time^="14"] {--day-h: 14}
.day-calendar[data-start-time^="15"] {--day-h: 15}
.day-calendar[data-start-time^="16"] {--day-h: 16}
.day-calendar[data-start-time^="17"] {--day-h: 17}
.day-calendar[data-start-time^="18"] {--day-h: 18}
.day-calendar[data-start-time^="19"] {--day-h: 19}
.day-calendar[data-start-time^="20"] {--day-h: 20}
.day-calendar[data-start-time^="21"] {--day-h: 21}
.day-calendar[data-start-time^="22"] {--day-h: 22}
.day-calendar[data-start-time^="23"] {--day-h: 23}

.day-calendar[data-start-time$="00"] {--day-m: 0}
.day-calendar[data-start-time$="15"] {--day-m: 15}
.day-calendar[data-start-time$="30"] {--day-m: 30}
.day-calendar[data-start-time$="45"] {--day-m: 45}

.day-calendar[data-end-time^="00"] {--day-end-h: 24}
.day-calendar[data-end-time^="01"] {--day-end-h:  1}
.day-calendar[data-end-time^="02"] {--day-end-h:  2}
.day-calendar[data-end-time^="03"] {--day-end-h:  3}
.day-calendar[data-end-time^="04"] {--day-end-h:  4}
.day-calendar[data-end-time^="05"] {--day-end-h:  5}
.day-calendar[data-end-time^="06"] {--day-end-h:  6}
.day-calendar[data-end-time^="07"] {--day-end-h:  7}
.day-calendar[data-end-time^="08"] {--day-end-h:  8}
.day-calendar[data-end-time^="09"] {--day-end-h:  9}
.day-calendar[data-end-time^="10"] {--day-end-h: 10}
.day-calendar[data-end-time^="11"] {--day-end-h: 11}
.day-calendar[data-end-time^="12"] {--day-end-h: 12}
.day-calendar[data-end-time^="13"] {--day-end-h: 13}
.day-calendar[data-end-time^="14"] {--day-end-h: 14}
.day-calendar[data-end-time^="15"] {--day-end-h: 15}
.day-calendar[data-end-time^="16"] {--day-end-h: 16}
.day-calendar[data-end-time^="17"] {--day-end-h: 17}
.day-calendar[data-end-time^="18"] {--day-end-h: 18}
.day-calendar[data-end-time^="19"] {--day-end-h: 19}
.day-calendar[data-end-time^="20"] {--day-end-h: 20}
.day-calendar[data-end-time^="21"] {--day-end-h: 21}
.day-calendar[data-end-time^="22"] {--day-end-h: 22}
.day-calendar[data-end-time^="23"] {--day-end-h: 23}
.day-calendar[data-end-time^="24"] {--day-end-h: 24}

.day-calendar[data-end-time$="00"] {--day-end-m: 0}
.day-calendar[data-end-time$="15"] {--day-end-m: 15}
.day-calendar[data-end-time$="30"] {--day-end-m: 30}
.day-calendar[data-end-time$="45"] {--day-end-m: 45}


.day-timeline [data-start-time$="00"] {--event-m:  0}
.day-timeline [data-start-time$="05"] {--event-m:  5}
.day-timeline [data-start-time$="10"] {--event-m: 10}
.day-timeline [data-start-time$="15"] {--event-m: 15}
.day-timeline [data-start-time$="20"] {--event-m: 20}
.day-timeline [data-start-time$="25"] {--event-m: 25}
.day-timeline [data-start-time$="30"] {--event-m: 30}
.day-timeline [data-start-time$="35"] {--event-m: 35}
.day-timeline [data-start-time$="40"] {--event-m: 40}
.day-timeline [data-start-time$="45"] {--event-m: 45}
.day-timeline [data-start-time$="50"] {--event-m: 50}
.day-timeline [data-start-time$="55"] {--event-m: 55}

.day-timeline [data-start-time^="00"] {--event-h:  0}
.day-timeline [data-start-time^="01"] {--event-h:  1}
.day-timeline [data-start-time^="02"] {--event-h:  2}
.day-timeline [data-start-time^="03"] {--event-h:  3}
.day-timeline [data-start-time^="04"] {--event-h:  4}
.day-timeline [data-start-time^="05"] {--event-h:  5}
.day-timeline [data-start-time^="06"] {--event-h:  6}
.day-timeline [data-start-time^="07"] {--event-h:  7}
.day-timeline [data-start-time^="08"] {--event-h:  8}
.day-timeline [data-start-time^="09"] {--event-h:  9}
.day-timeline [data-start-time^="10"] {--event-h: 10}
.day-timeline [data-start-time^="11"] {--event-h: 11}
.day-timeline [data-start-time^="12"] {--event-h: 12}
.day-timeline [data-start-time^="13"] {--event-h: 13}
.day-timeline [data-start-time^="14"] {--event-h: 14}
.day-timeline [data-start-time^="15"] {--event-h: 15}
.day-timeline [data-start-time^="16"] {--event-h: 16}
.day-timeline [data-start-time^="17"] {--event-h: 17}
.day-timeline [data-start-time^="18"] {--event-h: 18}
.day-timeline [data-start-time^="19"] {--event-h: 19}
.day-timeline [data-start-time^="20"] {--event-h: 20}
.day-timeline [data-start-time^="21"] {--event-h: 21}
.day-timeline [data-start-time^="22"] {--event-h: 22}
.day-timeline [data-start-time^="23"] {--event-h: 23}

.day-timeline [data-end-time$="00"] {--event-end-m:  0}
.day-timeline [data-end-time$="05"] {--event-end-m:  5}
.day-timeline [data-end-time$="10"] {--event-end-m: 10}
.day-timeline [data-end-time$="15"] {--event-end-m: 15}
.day-timeline [data-end-time$="20"] {--event-end-m: 20}
.day-timeline [data-end-time$="25"] {--event-end-m: 25}
.day-timeline [data-end-time$="30"] {--event-end-m: 30}
.day-timeline [data-end-time$="35"] {--event-end-m: 35}
.day-timeline [data-end-time$="40"] {--event-end-m: 40}
.day-timeline [data-end-time$="45"] {--event-end-m: 45}
.day-timeline [data-end-time$="50"] {--event-end-m: 50}
.day-timeline [data-end-time$="55"] {--event-end-m: 55}

.day-timeline [data-end-time^="00"] {--event-end-h:  0}
.day-timeline [data-end-time^="01"] {--event-end-h:  1}
.day-timeline [data-end-time^="02"] {--event-end-h:  2}
.day-timeline [data-end-time^="03"] {--event-end-h:  3}
.day-timeline [data-end-time^="04"] {--event-end-h:  4}
.day-timeline [data-end-time^="05"] {--event-end-h:  5}
.day-timeline [data-end-time^="06"] {--event-end-h:  6}
.day-timeline [data-end-time^="07"] {--event-end-h:  7}
.day-timeline [data-end-time^="08"] {--event-end-h:  8}
.day-timeline [data-end-time^="09"] {--event-end-h:  9}
.day-timeline [data-end-time^="10"] {--event-end-h: 10}
.day-timeline [data-end-time^="11"] {--event-end-h: 11}
.day-timeline [data-end-time^="12"] {--event-end-h: 12}
.day-timeline [data-end-time^="13"] {--event-end-h: 13}
.day-timeline [data-end-time^="14"] {--event-end-h: 14}
.day-timeline [data-end-time^="15"] {--event-end-h: 15}
.day-timeline [data-end-time^="16"] {--event-end-h: 16}
.day-timeline [data-end-time^="17"] {--event-end-h: 17}
.day-timeline [data-end-time^="18"] {--event-end-h: 18}
.day-timeline [data-end-time^="19"] {--event-end-h: 19}
.day-timeline [data-end-time^="20"] {--event-end-h: 20}
.day-timeline [data-end-time^="21"] {--event-end-h: 21}
.day-timeline [data-end-time^="22"] {--event-end-h: 22}
.day-timeline [data-end-time^="23"] {--event-end-h: 23}




@media (min-width: $screen-md-min) {
  .week-calendar {
    display: flex;
    flex-direction: row;

    details[open] summary {
      cursor: default;
      pointer-events: none;
      h3 .fa {
        display: none;
      }
    }

    .weekday {
      flex: 1;
      margin: 0 5px;
    }
    .weekday:first-child {
      margin-left: 0;
    }
    .weekday:last-child {
      margin-right: 0;
    }
    .no-events {
      display: block;
    }
  }
}
@media (min-width: $screen-sm-min) {
  .table-calendar, .week-calendar {
    .selected-day {
      display: none !important;
    }
  }
}
@media (max-width: $screen-xs-max) {
  .table-calendar .day .events {
    display: none;
  }
  .table-calendar td.day.has-events {
    background: $brand-primary;
    cursor: pointer;
    color: white;
  }
  .table-calendar td.day.has-events:hover {
    background: darken($brand-primary, 15%);
  }
}
#monthselform .row {
  margin: 0 -15px;
}
#monthselform .row > div {
  margin-bottom: 15px;
}
@media(min-width: $screen-sm-min) {
   .select-calendar-week-short {
     max-width: 50%;
   }
}
