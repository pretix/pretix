{% extends "pretixcontrol/event/base.html" %}
{% load i18n %}
{% load money %}
{% block title %}
    {% trans "Retry failed installment" %}
{% endblock %}
{% block content %}
    <h1>
        {% trans "Retry failed installment" %}
    </h1>
    <p>{% blocktrans trimmed %}
        Do you want to retry processing the failed installment payment?
    {% endblocktrans %}</p>

    <dl class="dl-horizontal">
        <dt>{% trans "Installment number" %}</dt>
        <dd>{{ failed_installment.installment_number }}</dd>
        <dt>{% trans "Amount" %}</dt>
        <dd>{{ failed_installment.amount|money:request.event.currency }}</dd>
        <dt>{% trans "Due date" %}</dt>
        <dd>{{ failed_installment.due_date|date:"SHORT_DATE_FORMAT" }}</dd>
        {% if failed_installment.failure_reason %}
        <dt>{% trans "Failure reason" %}</dt>
        <dd>{{ failed_installment.failure_reason }}</dd>
        {% endif %}
    </dl>

    <form method="post" href="">
        {% csrf_token %}
        <div class="row checkout-button-row">
            <div class="col-md-4">
                <a class="btn btn-block btn-default btn-lg"
                        href="{% url "control:event.order" event=request.event.slug organizer=request.event.organizer.slug code=order.code %}">
                    {% trans "No, take me back" %}
                </a>
            </div>
            <div class="col-md-4 col-md-offset-4">
                <button class="btn btn-block btn-primary btn-lg" type="submit">
                    {% trans "Yes, retry payment" %}
                </button>
            </div>
            <div class="clearfix"></div>
        </div>
    </form>
{% endblock %}
