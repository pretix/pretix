{% load i18n %}
{% load l10n %}
{% load commadecimal %}
{% load static %}
{% load dotdecimal %}
{% load ibanformat %}
{% load money %}
{% load unidecode %}
{% load rich_text %}

{% if pending_description %}
    {{ pending_description|rich_text }}
{% endif %}
<p>{% blocktrans trimmed %}
    Please transfer the full amount to the following bank account:
{% endblocktrans %}</p>

<div class="row">
    <div class="{% if settings.bank_details_type == "sepa" %}col-md-6{% else %}col-md-12{% endif %} col-xs-12">
            {% if settings.bank_details_type == "sepa" %}
                <dl class="dl-horizontal">
                    <dt>{% trans "Account holder" %}:</dt><dd>{{ settings.bank_details_sepa_name }}</dt>
                    <dt>{% trans "IBAN" %}:</dt><dd>{{ settings.bank_details_sepa_iban|ibanformat }}</dt>
                    <dt>{% trans "BIC" %}:</dt><dd>{{ settings.bank_details_sepa_bic }}</dt>
                    <dt>{% trans "Bank" %}:</dt><dd>{{ settings.bank_details_sepa_bank }}</dt>
                {% if details %}
                </dl>
                {% endif %}
            {% endif %}
            {% if details %}
                {{ details|linebreaks }}
                <dl class="dl-horizontal">
            {% endif %}
            {% if not settings.bank_details_type == "sepa" and not details %}
                <dl class="dl-horizontal">
            {% endif %}
            <dt>{% trans "Amount:" %}</dt><dd>{{ amount|money:event.currency }}</dd>
            <dt>{% trans "Reference code (important):" %}</dt><dd><b>{{ code }}</b></dd>
        </dl>
        <p>
            {% trans "After you sent the bank transfer, you can close this window. We will send you an email as soon as we received your payment." %}
        </p>
    </div>
    {% if settings.bank_details_type == "sepa" %}
        <div class="col-md-6 col-sm-6 hidden-xs text-center js-only">
            <ul class="nav nav-tabs" id="banktransfer_qrcodes_tabs" role="tablist">
                {% if swiss_qrbill %}
                    <li class="active"><a href="#banktransfer_qrcodes_qrbill" role="tab" id="banktransfer_qrcodes_qrbill_tab" data-toggle="tab" aria-controls="banktransfer_qrcodes_qrbill">QR-bill</a></li>
                {% endif %}
                <li {% if not swiss_qrbill %}class="active"{% endif %}><a href="#banktransfer_qrcodes_girocode" role="tab" id="banktransfer_qrcodes_girocode_tab" data-toggle="tab" aria-controls="banktransfer_qrcodes_girocode">EPC-QR</a></li>
                <li class=""><a href="#banktransfer_qrcodes_bezahlcode" role="tab" id="banktransfer_qrcodes_bezahlcode_tab" data-toggle="tab" aria-controls="banktransfer_qrcodes_bezahlcode">BezahlCode</a></li>
            </ul>
            <div class="tab-content" id="banktransfer_qrcodes_tabs_content">
                {% if swiss_qrbill %}
                    <div id="banktransfer_qrcodes_qrbill" class="tab-pane fade active in" role="tabpanel" aria-labelledby="banktransfer_qrcodes_qrbill_tab">
                        <p class="small">
                            {% trans "Scan the qr-code with your banking app" %}
                        </p>
                        <p class="banktransfer-swiss-cross-overlay">
                            <svg class="banktransfer-swiss-cross" xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 19.8 19.8">
                                <polygon
                                        points="18.3,0.7 1.6,0.7 0.7,0.7 0.7,1.6 0.7,18.3 0.7,19.1 1.6,19.1 18.3,19.1 19.1,19.1 19.1,18.3 19.1,1.6 19.1,0.7 "/>
                                <rect x="8.3" y="4" fill="#fff" width="3.3" height="11"/>
                                <rect x="4.4" y="7.9" fill="#fff" width="11" height="3.3"/>
                                <polygon fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="1.4357" points="0.7,1.6 0.7,18.3 0.7,19.1 1.6,19.1 18.3,19.1 19.1,19.1 19.1,18.3 19.1,1.6 19.1,0.7 18.3,0.7 1.6,0.7 0.7,0.7 "/>
                            </svg>

                            <script type="text/plain" data-size="150" data-replace-with-qr data-desc="{% trans 'Scan this image with your banking app’s QR-Reader to start the payment process.' %}">{{swiss_qrbill}}</script>
                        </p>
                    </div>
                {% endif %}
                <div id="banktransfer_qrcodes_girocode" class="tab-pane fade {% if not swiss_qrbill %}active in{% endif %}" role="tabpanel" aria-labelledby="banktransfer_qrcodes_girocode_tab">
                    <p class="small">
                        {% trans "Scan the qr-code with your banking app" %}
                    </p>
                    <p>
                    <script type="text/plain" data-size="150" data-replace-with-qr data-desc="{% trans 'Scan this image with your banking app’s QR-Reader to start the payment process.' %}">BCD
002
2
SCT
{{ settings.bank_details_sepa_bic }}
{{ settings.bank_details_sepa_name|unidecode }}
{{ settings.bank_details_sepa_iban }}
{{ event.currency }}{{ amount|dotdecimal }}


{{ code }}

            </script>
                    </p>
                </div>
                <div id="banktransfer_qrcodes_bezahlcode" class="tab-pane fade" role="tabpanel" aria-labelledby="banktransfer_qrcodes_bezahlcode_tab">
                    <p class="small">
                        {% trans "Scan the qr-code with your banking app" %}
                    </p>
                    <p>
                        <a aria-label="{% trans "Open BezahlCode in your banking app to start the payment process." %}" href="bank://singlepaymentsepa?name={{ settings.bank_details_sepa_name|urlencode }}&iban={{ settings.bank_details_sepa_iban }}&bic={{ settings.bank_details_sepa_bic }}&amount={{ amount|commadecimal }}&reason={{ code }}&currency={{ event.currency }}">
                        <script type="text/plain" data-size="150" data-replace-with-qr data-desc="{% trans 'Scan this image with your banking app’s QR-Reader to start the payment process.' %}">bank://singlepaymentsepa?name={{ settings.bank_details_sepa_name|urlencode }}&iban={{ settings.bank_details_sepa_iban }}&bic={{ settings.bank_details_sepa_bic }}&amount={{ amount|commadecimal }}&reason={{ code }}&currency={{ event.currency }}</script>
                        </a>
                    </p>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% if swiss_qrbill %}
<link rel="stylesheet" href="{% static "pretixplugins/banktransfer/swisscross.css" %}">
{% endif %}
